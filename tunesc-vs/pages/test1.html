<!DOCTYPE html>
<html>
<head>
    <title>Spotify Connection</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    <button id="connectButton">Connect Spotify</button>
    <button id="generateButton" style="display: none;">Generate Random Playlist</button>

    <script>
        // Connect Spotify Button
        $("#connectButton").click(function() {
            var clientId = 'YOUR_CLIENT_ID';
            var redirectUri = 'YOUR_REDIRECT_URI';
            var scopes = 'user-library-modify user-library-read';

            var url = 'https://accounts.spotify.com/authorize' +
                '?response_type=code' +
                '&client_id=' + encodeURIComponent(clientId) +
                '&scope=' + encodeURIComponent(scopes) +
                '&redirect_uri=' + encodeURIComponent(redirectUri);

            window.location = url;
        });

        // Generate Random Playlist Button
        $("#generateButton").click(function() {
            // Get an access token for the Spotify Web API
            var accessToken = 'YOUR_ACCESS_TOKEN';

            // Function to generate a random playlist with 10 songs
            function generateRandomPlaylist() {
                $.ajax({
                    url: 'https://api.spotify.com/v1/browse/new-releases',
                    headers: {
                        'Authorization': 'Bearer ' + accessToken
                    },
                    success: function(response) {
                        var playlistTracks = [];
                        var tracks = response.albums.items;

                        // Randomly select 10 tracks
                        for (var i = 0; i < 10; i++) {
                            var randomIndex = Math.floor(Math.random() * tracks.length);
                            var randomTrack = tracks[randomIndex].tracks.items[0];
                            playlistTracks.push(randomTrack.uri);
                        }

                        // Create a new playlist
                        $.ajax({
                            method: 'POST',
                            url: 'https://api.spotify.com/v1/users/' + userId + '/playlists',
                            headers: {
                                'Authorization': 'Bearer ' + accessToken
                            },
                            data: JSON.stringify({
                                'name': 'Random Playlist',
                                'description': 'A playlist generated by the HTML code'
                            }),
                            success: function(response) {
                                var playlistId = response.id;

                                // Add the tracks to the new playlist
                                $.ajax({
                                    method: 'POST',
                                    url: 'https://api.spotify.com/v1/users/' + userId + '/playlists/' + playlistId + '/tracks',
                                    headers: {
                                        'Authorization': 'Bearer ' + accessToken
                                    },
                                    data: JSON.stringify({
                                        'uris': playlistTracks
                                    }),
                                    success: function(response) {
                                        console.log('Playlist generated successfully');
                                    },
                                    error: function(error) {
                                        console.error('Error generating playlist:', error);
                                    }
                                });
                            },
                            error: function(error) {
                                console.error('Error creating playlist:', error);
                            }
                        });
                    },
                    error: function(error) {
                        console.error('Error getting new releases:', error);
                    }
                });
            }

            generateRandomPlaylist();
        });
    </script>
</body>
</html>