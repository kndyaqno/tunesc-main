<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Profile</title>
  </head>
  <body onload="onPageLoad()">
    <div class="main-container">
      <div></div>
    </div>
    <h1>imm gonna kill myself</h1>
    <div id="greet">Hi,</div>
    <button onclick="authorizeSpot()">Login to Spotify</button>
<!--HAKDOG-->>
    <div>
      <div>
        <p id="spot_name"></p>
        <p id="spot_email"></p>
        <p id="spot_followers"></p>
        <p id="spot_country"></p>
        <img id="spot_picture" alt="Your Icon!" />
      </div>
    </div>

    <div id="user-profile"></div>

    <br />
    <br />
    <button id="Signout">Signout</button>

    <!-- spotify -->
    <script src="/tunesc-vs/components/spot.js"></script>
    <script src="/tunesc-vs/components/spotProfile.js"></script>
    <!-- firebasesignin -->
    <script type="module" src="/tunesc-vs/auth/signin.js"></script>

    <script>
      // json.parse reverses the effect of json.stringify so cconvert niya yung string back to object
      let UserCreds = JSON.parse(sessionStorage.getItem("user-creds"));
      let UserInfo = JSON.parse(sessionStorage.getItem("user-info"));

      let MsgHead = document.getElementById("msg");
      let GreetHead = document.getElementById("greet");
      let SignoutBtn = document.getElementById("SignoutBtn");

      let Signout = () => {
        sessionStorage.removeItem("user-creds");
        sessionStorage.removeItem("user-info");
        window.location.href = "Login.html";
      };

      let CheckCred = () => {
        if (!sessionStorage.getItem("user-creds")) {
          window.location.href = "Login.html";
        } else {
          MsgHead.innerText = `user with email "${UserCreds.email}" logged in`;
          GreetHead.innerText = `welcome "${UserInfo.name}"!`;
        }
      };

      window.addEventListener("load", CheckCred);
      SignoutBtn.addEventListener("click", Signout);
    </script>

    <!-- firebase -->
    <script type="module" src="/tunesc-vs/auth/signin.js"></script>
    <script type="module" src="/tunesc-vs/auth/signup.js"></script>
  </body>
</html>
